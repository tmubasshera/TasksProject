<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css">
  <title>Create New Task</title>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container">
      <a class="navbar-brand" href="index.html">My App</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
      <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav">
          <li class="nav-item">
            <a class="nav-link" href="index.html">Home</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="tasks.html">Tasks</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="create.html">Create Task</a>
          </li>
          
        </ul>
      </div>
    </div>
  </nav>
  <div class="container">
    <h1 class="text-center">Create New Task</h1>
    <br>
    <form id="createTaskForm">
      <div class="form-group">
        <label for="title">Title:</label>
        <input type="text" id="title" name="title" class="form-control">
      </div>
      <br>
      <div class="form-group">
        <label for="priority">Priority:</label>
        <select id="priority" name="priority" class="form-control">
          <option value="Low">Low</option>
          <option value="Medium">Medium</option>
          <option value="High">High</option>
        </select>
      </div>
      <br>
      <div class="form-group">
        <label for="status">Status:</label>
        <select id="status" name="status" class="form-control">
          <option value="Pending">Pending</option>
          <option value="In Progress">In Progress</option>
          <option value="Completed">Completed</option>
        </select>
      </div>
      <br>
      <button type="submit" class="btn btn-primary">Create Task</button>
    </form>
  </div>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.1/jquery.min.js"></script>
  <script>
    $(document).ready(function() {
      $('#createTaskForm').submit(function(event) {
        event.preventDefault();

        var task = {
          title: $('#title').val(),
          priority: $('#priority').val(),
          status: $('#status').val()
        };
        console.log(task.title);

        // AJAX request to create a new task
        $.ajax({
          url: '/tasks',
          method: 'POST',
          data: task,
          success: function (newTask) {
            // Handle the response
            // Display a success message to the user
            alert('Task created successfully!');
            // Redirect the user to tasks.html
            window.location.href = '/tasks.html';
          },
          error: function(xhr, textStatus, errorThrown) {
            console.log('Error:', errorThrown);
          }
        });
      });
    });
  </script>
</body>
</html>
